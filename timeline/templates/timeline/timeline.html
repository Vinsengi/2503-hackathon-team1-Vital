{% extends 'base.html' %}
{% load static %}

{% block title %}Timeline{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/timeline.css' %}">
{% endblock %}

{% block content %}
<ul class="timeline timeline-snap-icon max-md:timeline-compact timeline-vertical timeline-centered">
    {% for event in events %}
    <li{% if forloop.counter|divisibleby:2 %} class="timeline-shift"{% endif %}>
        <div class="timeline-middle h-16">
            <span class="bg-primary/20 flex size-8 items-center justify-center rounded-full">
                <span class="icon-[tabler--point] text-primary size-5"></span>
            </span>
        </div>
        {% if forloop.counter|divisibleby:2 %}
        <div class="timeline-end mt-6 px-1 md:mt-8">
            <div class="text-white text-sm font-normal">{{ event.year }}</div>
        </div>
        <div class="timeline-start me-4 mb-8 w-full">
        {% else %}
        <div class="timeline-start me-4 mt-8 max-md:pt-2">
            <div class="text-white text-sm font-normal">{{ event.year }}</div>
        </div>
        <div class="timeline-end ms-4 mb-8">
        {% endif %}
            <div class="card">
                <div class="card-body gap-4">
                    <!--Image -->
                    {% if event.image %}
                    <div class="card-image w-full">
                        <img src="{{ event.image.url }}" alt="{{ event.event }}" class="rounded-lg w-full">
                    </div>
                    {% endif %}

                    <!--Title -->
                    <h5 class="card-title text-lg">{{ event.event }}</h5>

                    <!--Description-->
                    <p>{{ event.description }}</p>

                    <!--Honour button-->
                    <div class="honour-container flex justify-start mt-2">
                        <button class="honour-btn btn btn-ghost btn-sm {% if event.user_has_honoured %}honoured{% endif %}"
                                data-timeline-id="{{ event.id }}"
                                data-honour-count="{{ event.honour_count }}">
                            <!-- Heart icon: filled if honoured -->
                            {% if event.user_has_honoured %}
                            <span class="icon-[tabler--heart-filled] size-5"></span>
                            {% else %}
                            <span class="icon-[tabler--heart] size-5"></span>
                            {% endif %}
                            <span class="honour-count">{{ event.honour_count }}</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <hr />
    </li>
    {% endfor %}
</ul>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/script.js' %}"></script>
{% endblock %}
